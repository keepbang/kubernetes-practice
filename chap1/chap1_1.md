# 쿠버네티스(Kubernetes) 소개

쿠버네티스는 대규모 클러스터 환경에서 컨테이너화된 애플리케이션을 자동으로 배포하고 확장, 관리하는 데 필요한 여러 가지 요소들을 자동화하는 오픈소스 플랫폼이다.

- 전통적 배포환경 -> 비효율적
  - 리소스의 제한을 줄 방법이 없었다
  - 각 물리 서버에 하나의 애플리케이션을 둔다.
  - 물리 서버를 많이 유지하기 위해 많은 비용이 든다.
  

- 가상화된 배포 시대
  - 단일 물리서버에서 여러 VM 실행
  - VM 간 애플리케이션 격리
  - 일정 수준의 보안성 제공
  - 리소스 분배화


- 컨테이너 개발 시대
  - 격리 속성을 완화하여 애플리케이션 간의 운영체제를 공유
  - VM 환경처럼 명령어를 이용해 순차적으로 설정을 변경하면서 시스템을 관리하는 것이 아닌 `소스코드 기반`으로 클러스터를 관리
  - `의도한 상태`로 클러스터를 관리
  <details>
    <summary>컨테이너에서 제공하는 혜택</summary>
    <ul>
    <li>기민한 애플리케이션 생성과 배포: VM 이미지를 사용하는 것에 비해 컨테이너 이미지 생성이 보다 쉽고 효율적임.</li>
    <li>지속적인 개발, 통합 및 배포: 안정적이고 주기적으로 컨테이너 이미지를 빌드해서 배포할 수 있고 (이미지의 불변성 덕에) 빠르고 효율적으로 롤백할 수 있다.</li>
    <li>개발과 운영의 관심사 분리: 배포 시점이 아닌 빌드/릴리스 시점에 애플리케이션 컨테이너 이미지를 만들기 때문에, 애플리케이션이 인프라스트럭처에서 분리된다.</li>
    <li>가시성(observability): OS 수준의 정보와 메트릭에 머무르지 않고, 애플리케이션의 헬스와 그 밖의 시그널을 볼 수 있다.</li>
    <li>개발, 테스팅 및 운영 환경에 걸친 일관성: 랩탑에서도 클라우드에서와 동일하게 구동된다.</li>
    <li>클라우드 및 OS 배포판 간 이식성: Ubuntu, RHEL, CoreOS, 온-프레미스, 주요 퍼블릭 클라우드와 어디에서든 구동된다.</li>
    <li>애플리케이션 중심 관리: 가상 하드웨어 상에서 OS를 실행하는 수준에서 논리적인 리소스를 사용하는 OS 상에서 애플리케이션을 실행하는 수준으로 추상화 수준이 높아진다.</li>
    <li>느슨하게 커플되고, 분산되고, 유연하며, 자유로운 마이크로서비스: 애플리케이션은 단일 목적의 머신에서 모놀리식 스택으로 구동되지 않고 보다 작고 독립적인 단위로 쪼개져서 동적으로 배포되고 관리될 수 있다.</li>
    <li>리소스 격리: 애플리케이션 성능을 예측할 수 있다.</li>
    <li>리소스 사용량: 고효율 고집적.</li>
    </ul>
  </details>


# 쿠버네티스가 필요한 이유?

컨테이너는 애플리케이션을 포장하고 실행하기에 좋은 방법입니다. 하지만 프로덕션 환경에서의 관리와 가동 중단등을 확인해줘야 합니다.

이런 과정들을 시스템이 대신한다면 어떨까..? → 쿠버네티스의 등장

- 서비스 디스커버리와 로드 밸런싱
- 스토리지 오케스트레이션
- 자동화된 롤백 롤아웃
- 자동화된 빈 패킹
- self-healing
- 시크릿과 구성관리


# 쿠버네티스에서 사용하는 용어 사전
- [쿠버네티스 용어집](https://kubernetes.io/ko/docs/reference/glossary/?all=true)
  
### 필수라 생각하는 용어 정리
> 스터디를 진행하면서 추가할 예정

| keyword | 설명                                                                                                                                                                                     |
|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 노드      | 노드는 쿠버네티스의 작업 장비(worker machine)이다.<br/>작업 노드는 클러스터에 따라 VM이거나 물리 머신일 것이다.                                                                                                              |
| 클러스터    | 컨테이너화된 애플리케이션을 실행하는 노드라고 하는 워커 머신의 집합. 모든 클러스터는 최소 한 개의 워커 노드를 가진다.                                                                                                                    |
| 컨테이너    | 소프트웨어와 그것에 종속된 모든 것을 포함한 가볍고 휴대성이 높은 실행 가능 이미지.                                                                                                                                        |
| 워크로드    | 워크로드는 쿠버네티스에서 구동되는 애플리케이션이다.                                                                                                                                                           |
| 파드      | 가장 작고 단순한 쿠버네티스 오브젝트. 파드는 사용자 클러스터에서 동작하는 컨테이너의 집합을 나타낸다.<br/>파드는 일반적으로 하나의 기본 컨테이너를 실행하기 위해서 구성된다. 또한 파드는 로깅과 같이 보완적인 기능을 추가하기 위한 사이드카 컨테이너를 선택적으로 실행할 수 있다. 파드는 보통 디플로이먼트에 의해서 관리된다. |
| 네임스페이스  | 쿠버네티스에서 하나의 클러스터 내에서 리소스 그룹의 격리를 지원하기 위해 사용하는 추상적 개념.                                                                                                                                  |
| 인그레스    | 클러스터 내의 서비스에 대한 외부 접근을 관리하는 API 오브젝트이며, 일반적으로 HTTP를 관리함. <br/>부하 분산, SSL 종료, 명칭 기반의 가상 호스팅을 제공                                                                                         |
| 컨트롤 플레인 | 컨테이너의 라이프사이클을 정의, 배포, 관리하기 위한 API와 인터페이스들을 노출하는 컨테이너 오케스트레이션 레이어.<br/>                                                                                                                 |

-----
### 컨트롤 플레인
- etcd : yaml key-value 가 포함되어 있음.
- API 서버 : kubectl 명령어를 수행하면 사용하는 api가 들어있는 rest api 서버.
- 스케줄러 : 노드가 배정되지 않은 새로 생성된 파드를 감지, 실행할 노드를 선택함.
- 컨트롤러 매니저 : 컨트롤러 프로세스를 관리.
- 클라우드 컨트롤러 매니저 : 타사 클라우드 플랫폼과 통합하는 매니저